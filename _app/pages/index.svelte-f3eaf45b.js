import{S as e,i as t,s as n,l as r,f as o,G as i,d as a,z as s,t as u,g as c,e as f,c as l,a as m,b as g,F as h,H as E}from"../chunks/vendor-ca7ba114.js";function T(){const e=window;function t(t){e.console&&(e.console.error?e.console.error(t):e.console.log&&e.console.log(t))}function n(e,n,r,o){const i=o||t,a=e.createShader(r);e.shaderSource(a,n),e.compileShader(a);if(!e.getShaderParameter(a,e.COMPILE_STATUS)){return i("*** Error compiling shader '"+a+"':"+e.getShaderInfoLog(a)+"\n"+n.split("\n").map(((e,t)=>`${t+1}: ${e}`)).join("\n")),e.deleteShader(a),null}return a}function r(e,n,r,o,i){const a=i||t,s=e.createProgram();n.forEach((function(t){e.attachShader(s,t)})),r&&r.forEach((function(t,n){e.bindAttribLocation(s,o?o[n]:n,t)})),e.linkProgram(s);if(!e.getProgramParameter(s,e.LINK_STATUS)){return a("Error in program linking:"+e.getProgramInfoLog(s)),e.deleteProgram(s),null}return s}function o(e,t,r,o){let i,a="";const s=document.getElementById(t);if(!s)throw"*** Error: unknown script element"+t;if(a=s.text,!r)if("x-shader/x-vertex"===s.type)i=e.VERTEX_SHADER;else if("x-shader/x-fragment"===s.type)i=e.FRAGMENT_SHADER;else if(i!==e.VERTEX_SHADER&&i!==e.FRAGMENT_SHADER)throw"*** Error: unknown shader type";return n(e,a,r||i,o)}const i=["VERTEX_SHADER","FRAGMENT_SHADER"];function a(e,t){return t===e.SAMPLER_2D?e.TEXTURE_2D:t===e.SAMPLER_CUBE?e.TEXTURE_CUBE_MAP:void 0}function s(e,t){let n=0;function r(t,r){const o=e.getUniformLocation(t,r.name),i=r.type,s=r.size>1&&"[0]"===r.name.substr(-3);if(i===e.FLOAT&&s)return function(t){e.uniform1fv(o,t)};if(i===e.FLOAT)return function(t){e.uniform1f(o,t)};if(i===e.FLOAT_VEC2)return function(t){e.uniform2fv(o,t)};if(i===e.FLOAT_VEC3)return function(t){e.uniform3fv(o,t)};if(i===e.FLOAT_VEC4)return function(t){e.uniform4fv(o,t)};if(i===e.INT&&s)return function(t){e.uniform1iv(o,t)};if(i===e.INT)return function(t){e.uniform1i(o,t)};if(i===e.INT_VEC2)return function(t){e.uniform2iv(o,t)};if(i===e.INT_VEC3)return function(t){e.uniform3iv(o,t)};if(i===e.INT_VEC4)return function(t){e.uniform4iv(o,t)};if(i===e.BOOL)return function(t){e.uniform1iv(o,t)};if(i===e.BOOL_VEC2)return function(t){e.uniform2iv(o,t)};if(i===e.BOOL_VEC3)return function(t){e.uniform3iv(o,t)};if(i===e.BOOL_VEC4)return function(t){e.uniform4iv(o,t)};if(i===e.FLOAT_MAT2)return function(t){e.uniformMatrix2fv(o,!1,t)};if(i===e.FLOAT_MAT3)return function(t){e.uniformMatrix3fv(o,!1,t)};if(i===e.FLOAT_MAT4)return function(t){e.uniformMatrix4fv(o,!1,t)};if((i===e.SAMPLER_2D||i===e.SAMPLER_CUBE)&&s){const t=[];for(let e=0;e<info.size;++e)t.push(n++);return u=a(e,i),c=t,function(t){e.uniform1iv(o,c),t.forEach((function(t,n){e.activeTexture(e.TEXTURE0+c[n]),e.bindTexture(u,t)}))}}var u,c;if(i===e.SAMPLER_2D||i===e.SAMPLER_CUBE)return function(t,n){return function(r){e.uniform1i(o,n),e.activeTexture(e.TEXTURE0+n),e.bindTexture(t,r)}}(a(e,i),n++);throw"unknown type: 0x"+i.toString(16)}const o={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let a=0;a<i;++a){const n=e.getActiveUniform(t,a);if(!n)break;let i=n.name;"[0]"===i.substr(-3)&&(i=i.substr(0,i.length-3));const s=r(t,n);o[i]=s}return o}function u(e,...t){e=e.uniformSetters||e;for(const n of t)Object.keys(n).forEach((function(t){const r=e[t];r&&r(n[t])}))}function c(e,t){const n={};function r(t){return function(n){if(n.value)switch(e.disableVertexAttribArray(t),n.value.length){case 4:e.vertexAttrib4fv(t,n.value);break;case 3:e.vertexAttrib3fv(t,n.value);break;case 2:e.vertexAttrib2fv(t,n.value);break;case 1:e.vertexAttrib1fv(t,n.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(e.ARRAY_BUFFER,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,n.numComponents||n.size,n.type||e.FLOAT,n.normalize||!1,n.stride||0,n.offset||0)}}const o=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<o;++i){const o=e.getActiveAttrib(t,i);if(!o)break;const a=e.getAttribLocation(t,o.name);n[o.name]=r(a)}return n}function f(e,t){e=e.attribSetters||e,Object.keys(t).forEach((function(n){const r=e[n];r&&r(t[n])}))}function l(e,t,n,r){const o=e.createVertexArray();return e.bindVertexArray(o),f(t,n),r&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r),e.bindVertexArray(null),o}function m(e,t,n){f(t,n.attribs),n.indices&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.indices)}const g=["","MOZ_","OP_","WEBKIT_"];function h(e,t,n){return function(e,t){let n=0;return e.push=function(){for(let t=0;t<arguments.length;++t){const r=arguments[t];if(r instanceof Array||r.buffer&&r.buffer instanceof ArrayBuffer)for(let t=0;t<r.length;++t)e[n++]=r[t];else e[n++]=r}},e.reset=function(e){n=e||0},e.numComponents=t,Object.defineProperty(e,"numElements",{get:function(){return this.length/this.numComponents|0}}),e}(new(n||Float32Array)(e*t),e)}function E(e,t,n,r){n=n||e.ARRAY_BUFFER;const o=e.createBuffer();return e.bindBuffer(n,o),e.bufferData(n,t,r||e.STATIC_DRAW),o}function T(e){return"indices"!==e}function d(e,t){if(t instanceof Int8Array)return e.BYTE;if(t instanceof Uint8Array)return e.UNSIGNED_BYTE;if(t instanceof Int16Array)return e.SHORT;if(t instanceof Uint16Array)return e.UNSIGNED_SHORT;if(t instanceof Int32Array)return e.INT;if(t instanceof Uint32Array)return e.UNSIGNED_INT;if(t instanceof Float32Array)return e.FLOAT;throw"unsupported typed array type"}function A(e){return e.buffer&&e.buffer instanceof ArrayBuffer}function p(e,t){let n;if(n=e.indexOf("coord")>=0?2:e.indexOf("color")>=0?4:3,t%n>0)throw"can not guess numComponents. You should specify it.";return n}function b(e,t){if(A(e))return e;if(e.data&&A(e.data))return e.data;Array.isArray(e)&&(e={data:e}),e.numComponents||(e.numComponents=p(t,e.length));let n=e.type;n||"indices"===t&&(n=Uint16Array);const r=h(e.numComponents,e.data.length/e.numComponents|0,n);return r.push(e.data),r}function x(e,t,n){const r=n||function(e){const t={};return Object.keys(e).filter(T).forEach((function(e){t["a_"+e]=e})),t}(t),o={};return Object.keys(r).forEach((function(n){const i=r[n],a=t[i];if(a.value)o[n]={value:a.value};else{const t=b(a,i);o[n]={buffer:E(e,t),numComponents:a.numComponents||t.numComponents||p(i),type:d(e,t),normalize:(s=t,s instanceof Int8Array||s instanceof Uint8Array)}}var s})),o}function _(e){return e.length?e:e.data}const v=/coord|texture/i,R=/color|colour/i;function p(e,t){let n;if(n=v.test(e)?2:R.test(e)?4:3,t%n>0)throw new Error(`Can not guess numComponents for attribute '${e}'. Tried ${n} but ${t} values is not evenly divisible by ${n}. You should specify it.`);return n}const F=["position","positions","a_position"];function y(e){let t;for(const a of F)if(a in e){t=a;break}t=t||Object.keys(e)[0];const n=e[t],r=_(n).length,o=function(e,t){return e.numComponents||e.size||p(t,_(e).length)}(n,t),i=r/o;if(r%o>0)throw new Error(`numComponents ${o} not correct for length ${r}`);return i}function w(e,t,n,r,o){const i=t.indices;n=void 0===n?e.TRIANGLES:n;const a=void 0===r?t.numElements:r;o=void 0===o?0:o,i?e.drawElements(n,a,e.UNSIGNED_SHORT,o):e.drawArrays(n,o,a)}var S;return!!!document.documentMode&&!!window.StyleMedia&&(HTMLCanvasElement.prototype.getContext=(S=HTMLCanvasElement.prototype.getContext,function(){let e=arguments;const t=e[0];return"webgl"===t&&(e=[].slice.call(arguments),e[0]="experimental-webgl"),S.apply(this,e)})),{createAugmentedTypedArray:h,createAttribsFromArrays:x,createBuffersFromArrays:function(e,t){const n={};return Object.keys(t).forEach((function(r){const o="indices"===r?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,i=b(t[r],name);n[r]=E(e,i,o)})),t.indices?n.numElements=t.indices.length:t.position&&(n.numElements=t.position.length/3),n},createBufferInfoFromArrays:function(e,t,n){const r={attribs:x(e,t,n)};let o=t.indices;return o?(o=b(o,"indices"),r.indices=E(e,o,e.ELEMENT_ARRAY_BUFFER),r.numElements=o.length):r.numElements=y(t),r},createAttributeSetters:c,createTexture:function(e,t,n,r){const o=e.createTexture();return e.bindTexture(e.TEXTURE_2D,o),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n,r,0,e.RGBA,e.FLOAT,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),o},createFramebuffer:function(e,t){const n=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),n},createProgram:r,createProgramFromScripts:function(e,t,n,a,s){const u=[];for(let r=0;r<t.length;++r)u.push(o(e,t[r],e[i[r]],s));return r(e,u,n,a,s)},createProgramFromSources:function(e,t,o,a,s){const u=[];for(let r=0;r<t.length;++r)u.push(n(e,t[r],e[i[r]],s));return r(e,u,o,a,s)},createProgramInfo:function(e,t,n,r,o){t=t.map((function(e){const t=document.getElementById(e);return t?t.text:e}));const i=webglUtils.createProgramFromSources(e,t,n,r,o);return i?{program:i,uniformSetters:s(e,i),attribSetters:c(e,i)}:null},createUniformSetters:s,createVAOAndSetAttributes:l,createVAOFromBufferInfo:function(e,t,n){return l(e,t.attribSetters||t,n.attribs,n.indices)},drawBufferInfo:w,drawObjectList:function(e,t){let n=null,r=null;t.forEach((function(t){const o=t.programInfo,i=t.bufferInfo;let a=!1;o!==n&&(n=o,e.useProgram(o.program),a=!0),(a||i!==r)&&(r=i,m(e,o.attribSetters,i)),u(o.uniformSetters,t.uniforms),w(e,i)}))},glEnumToString:function(e,t){const n=[];for(const r in e)e[r]===t&&n.push(r);return n.length?n.join(" | "):`0x${t.toString(16)}`},getExtensionWithKnownPrefixes:function(e,t){for(let n=0;n<g.length;++n){const r=g[n]+t,o=e.getExtension(r);if(o)return o}},resizeCanvasToDisplaySize:function(e,t){t=t||1;const n=e.clientWidth*t|0,r=e.clientHeight*t|0;return(e.width!==n||e.height!==r)&&(e.width=n,e.height=r,!0)},setAttributes:f,setBuffersAndAttributes:m,setUniforms:u}}let d;function A(e,t,n){let r=Date.now(),o=e(n),i=Date.now()-r;const a=t.length,s=n.length,u=s-a;return{result:o,text:`\nTime spend correlating: ${i}ms\nSignal_length ${a} samples\nRecord_length ${s} samples\nResult_length ${u} samples\nTotal computations ${a*u}\nOperations per second ${a*u/(i/1e3)}\n`}}const p=Math.PI,b=Math.SQRT1_2;class x extends class{constructor(e,t=Float32Array){e instanceof x?(this.ArrayType=e.ArrayType,this.real=new this.ArrayType(e.real),this.imag=new this.ArrayType(e.imag)):(this.ArrayType=t,this.real=new this.ArrayType(e),this.imag=new this.ArrayType(this.real.length)),this.length=this.real.length}toString(){const e=[];return this.forEach(((t,n)=>{e.push(`(${t.real.toFixed(2)}, ${t.imag.toFixed(2)})`)})),`[${e.join(", ")}]`}forEach(e){const t=this.length,n=Object.seal(Object.defineProperties({},{real:{writable:!0},imag:{writable:!0}}));for(let r=0;r<t;r++)n.real=this.real[r],n.imag=this.imag[r],e(n,r,t)}map(e){return this.forEach(((t,n,r)=>{e(t,n,r),this.real[n]=t.real,this.imag[n]=t.imag})),this}conjugate(){return new x(this).map((e=>{e.imag*=-1}))}magnitude(){const e=new this.ArrayType(this.length);return this.forEach(((t,n)=>{e[n]=Math.sqrt(t.real*t.real+t.imag*t.imag)})),e}}{FFT(){return _(this,!1)}InvFFT(){return _(this,!0)}frequencyMap(e){return this.FFT().map(e).InvFFT()}}function _(e,t){const n=e.length;return n&n-1?function(e,t){const n=e.length;if(1===n)return e;const r=new x(n,e.ArrayType),o=function(e){const t=Math.sqrt(e);let n=3;for(;n<=t;){if(e%n==0)return n;n+=2}return e}(n),i=n/o,a=1/Math.sqrt(o);let s=new x(i,e.ArrayType);for(let u=0;u<o;u++){for(let t=0;t<i;t++)s.real[t]=e.real[t*o+u],s.imag[t]=e.imag[t*o+u];i>1&&(s=_(s,t));const a=Math.cos(2*p*u/n),c=(t?-1:1)*Math.sin(2*p*u/n);let f=1,l=0;for(let e=0;e<n;e++){const t=s.real[e%i],n=s.imag[e%i];r.real[e]+=f*t-l*n,r.imag[e]+=f*n+l*t,[f,l]=[f*a-l*c,f*c+l*a]}}for(let u=0;u<n;u++)e.real[u]=a*r.real[u],e.imag[u]=a*r.imag[u];return e}(e,t):function(e,t){const n=e.length,r=function(e){const t=e.length,n=new Set;for(let r=0;r<t;r++){const o=v(r,t);n.has(r)||([e.real[r],e.real[o]]=[e.real[o],e.real[r]],[e.imag[r],e.imag[o]]=[e.imag[o],e.imag[r]],n.add(o))}return e}(e),o=r.real,i=r.imag;let a=1;for(;a<n;){const e=Math.cos(p/a),r=(t?-1:1)*Math.sin(p/a);for(let t=0;t<n/(2*a);t++){let n=1,s=0;for(let u=0;u<a;u++){const c=2*t*a+u,f=c+a,l=o[c],m=i[c],g=n*o[f]-s*i[f],h=s*o[f]+n*i[f];o[c]=b*(l+g),i[c]=b*(m+h),o[f]=b*(l-g),i[f]=b*(m-h),[n,s]=[n*e-s*r,n*r+s*e]}}a<<=1}return r}(e,t)}function v(e,t){let n=0;for(;t>1;)n<<=1,n+=1&e,e>>=1,t>>=1;return n}function R(e,t){let n=new Float32Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]*t[r];return n}function F(e){let t=null;if(t)return t;t=new Float32Array(e);for(let n=0;n<e;n++)t[n]=2*Math.random()-1;return t}function y(e,t,n=8,r=2048){e.length;let o=new Float32Array(e.length+2*r);o.fill(0),o.set(e,r);let i=r/n,a=[];for(let h=0;h<o.length-r;h+=i)a.push(o.slice(h,h+r));let s=function(e=2048,t=.5){const n=t,r=1-n,o=new Float32Array(e);for(let i=-e/2;i<e/2;i++)o[i+e/2]=n+r*Math.cos(2*Math.PI*i/e);return o}(2048),u=[];a.forEach(((e,t)=>{u.push(new x(R(e,s)).FFT())})),u.forEach(((e,n)=>{e.real=R(e.real,t),e.imag=R(e.imag,t)}));let c,f,l=u.map((e=>e.InvFFT())),m=new Float32Array(e.length);l.forEach(((t,n)=>{c=i*n-r;for(let r=0;r<t.length;r++)f=c+r,f+r>=0&&f+r<e.length&&(m[f]+=t.real[r])}));let g=m.reduce(((e,t)=>Math.max(e,t)),0);return m.map((e=>e*(1/g)))}function w(e){let t;return{c(){t=u("Running... Please wait...")},l(e){t=c(e,"Running... Please wait...")},m(e,n){o(e,t,n)},p:i,d(e){e&&a(t)}}}function S(e){let t,n,r,s;return{c(){t=f("button"),n=u("Run"),this.h()},l(e){t=l(e,"BUTTON",{class:!0});var r=m(t);n=c(r,"Run"),r.forEach(a),this.h()},h(){g(t,"class","svelte-1v0cjjk")},m(i,a){o(i,t,a),h(t,n),r||(s=E(t,"click",e[1]),r=!0)},p:i,d(e){e&&a(t),r=!1,s()}}}function U(e){let t;function n(e,t){return e[0]?w:S}let s=n(e),u=s(e);return{c(){u.c(),t=r()},l(e){u.l(e),t=r()},m(e,n){u.m(e,n),o(e,t,n)},p(e,[r]){s===(s=n(e))&&u?u.p(e,r):(u.d(1),u=s(e),u&&(u.c(),u.m(t.parentNode,t)))},i:i,o:i,d(e){u.d(e),e&&a(t)}}}const M=!0;function D(e,t,n){s((()=>{}));let r=!1;return[r,function(){n(0,r=!0),setTimeout((()=>{let e=Math.pow(2,17),t=Math.pow(2,18),o=F(e),i=function(e=44100){let t=F(e),n=new Float32Array(2048);for(let r=0;r<n.length;r++)n[r]=r<1024?1-2*r/1024:0;return y(t,n)}(t),a=function(){let e,t,n;return{setup:function(r,o){if(e=r,t=o,n=t.length-e.length,n<1)throw"Source signal not larger than target signal"},run:function(r){let o=new Float32Array(n);for(var i=0;i<o.length;i++)for(var a=0;a<e.length;a++)o[i]+=e[a]*t[a+i];return o},clean:function(){}}}(),s=function(){let e,t,n,r,o,i,a,s,u,c,f,l,m,g,h,E,A;if(d=T(),c=document.createElement("canvas"),c.addEventListener("webglcontextlost",(e=>{throw alert("Lost WebGL context. You have too many webgl context running (either in this tab or divided over all tabs). I think the best way to solve this is restart the web-browser completely..."),e})),f=c.getContext("webgl",{alpha:!1,depth:!1,antialias:!1}),!f)return;return f.getExtension("OES_texture_float")?f.getExtension("WEBGL_color_buffer_float")?f.getParameter(f.MAX_VERTEX_TEXTURE_IMAGE_UNITS)<1?void alert("Can not use textures in vertex shaders"):(h=f.createBuffer(),f.bindBuffer(f.ARRAY_BUFFER,h),f.bufferData(f.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),f.STATIC_DRAW),{setup:function(c,h){let E=c.length/4;e=Math.pow(2,Math.ceil(Math.log2(E)/2)),t=h.length/(4*e),n=c.length/(4*e),r=h.length,o=c.length,i=r-o,a=i/4,console.log(e),console.log(t),console.log(n),console.log(r),console.log(o),console.log(i),console.log(a),s="\n      attribute vec4 position;\n      void main() {\n        gl_Position = position;\n      }\n    ",u=`\n      precision highp float;\n      uniform sampler2D sourceSamplesTex;\n      uniform sampler2D targetSamplesTex;\n\n      uniform vec2 sourceTexDimensions;\n      uniform vec2 targetTexDimensions;\n      uniform vec2 canvasDimensions;\n      float fracCoord_to_index() {\n        return gl_FragCoord.x - 0.5 + canvasDimensions.x * (gl_FragCoord.y - 0.5);\n      }\n      vec4 index_to_source(float index) {\n        // https://stackoverflow.com/questions/36324295/webgl-access-buffer-from-shader#36326319\n        float column =   mod(index,  sourceTexDimensions.x);\n        float    row = floor(index / sourceTexDimensions.x);\n        vec2 uv = vec2(\n          (column + 0.5) / sourceTexDimensions.x,\n          (   row + 0.5) / sourceTexDimensions.y\n        );\n        return texture2D(sourceSamplesTex, uv);\n      }\n      vec4 index_to_target(float index) {\n        // https://stackoverflow.com/questions/36324295/webgl-access-buffer-from-shader#36326319\n        float column =   mod(index,  targetTexDimensions.x);\n        float    row = floor(index / targetTexDimensions.x);\n        vec2 uv = vec2(\n          (column + 0.5) / targetTexDimensions.x,\n          (   row + 0.5) / targetTexDimensions.y\n        );\n        return texture2D(targetSamplesTex, uv);\n      }\n      void main() {\n\n        // We have to compute for four subsequent values since we store 4 samples per pixel\n        float index = fracCoord_to_index();\n        float value = 0.0;\n\n        vec4 target;\n        vec4 source1;\n        vec4 source2;\n\n        vec4 r1 = vec4(0.0, 0.0, 0.0, 0.0); // Result of offset 0\n        vec4 r2 = vec4(0.0, 0.0, 0.0, 0.0); // etcetera\n        vec4 r3 = vec4(0.0, 0.0, 0.0, 0.0);\n        vec4 r4 = vec4(0.0, 0.0, 0.0, 0.0);\n\n        source2 = index_to_source(index);\n        for (float i = 0.0; i < ${a}.0; i++) {\n          target = index_to_target(i);\n          source1 = source2.rgba;\n          source2 = index_to_source(index+i+1.0);\n\n          r1 += target * source1;\n          r2 += vec4(target.rgb * source1.gba, target.a   * source2.r  );\n          r3 += vec4(target.rg  * source1.ba , target.ba  * source2.rg );\n          r4 += vec4(target.r   * source1.a  , target.gba * source2.rgb);\n        }\n\n        gl_FragColor = vec4(\n          r1.r + r1.g + r1.b + r1.a,\n          r2.r + r2.g + r2.b + r2.a,\n          r3.r + r3.g + r3.b + r3.a,\n          r4.r + r4.g + r4.b + r4.a\n        );\n      }\n    `,l=d.createProgramFromSources(f,["\n      attribute vec4 position;\n      void main() {\n        gl_Position = position;\n      }\n    ",u]),m={position:f.getAttribLocation(l,"position"),sourceSamplesTex:f.getUniformLocation(l,"sourceSamplesTex"),targetSamplesTex:f.getUniformLocation(l,"targetSamplesTex"),sourceTexDimensions:f.getUniformLocation(l,"sourceTexDimensions"),targetTexDimensions:f.getUniformLocation(l,"targetTexDimensions"),canvasDimensions:f.getUniformLocation(l,"canvasDimensions")},f.viewport(0,0,e,t-n);let T=d.createTexture(f,null,e,t-n);g=d.createFramebuffer(f,T),f.bindFramebuffer(f.FRAMEBUFFER,g),A=d.createTexture(f,c,e,n)},run:function(r){switch(E=d.createTexture(f,r,e,t),f.useProgram(l),f.uniform1i(m.sourceSamplesTex,0),f.uniform2f(m.sourceTexDimensions,e,t),f.uniform1i(m.targetSamplesTex,1),f.uniform2f(m.targetTexDimensions,e,n),f.uniform2f(m.canvasDimensions,e,t-n),f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,E),f.activeTexture(f.TEXTURE0+1),f.bindTexture(f.TEXTURE_2D,A),f.bindBuffer(f.ARRAY_BUFFER,h),f.enableVertexAttribArray(m.position),f.vertexAttribPointer(m.position,2,f.FLOAT,!1,0,0),f.checkFramebufferStatus(f.FRAMEBUFFER)){case f.FRAMEBUFFER_COMPLETE:break;case f.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:console.error("The attachment types are mismatched or not all framebuffer attachment points are framebuffer attachment complete.");break;case f.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:console.error("There is no attachment.");break;case f.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:console.error("Height and width of the attachment are not the same.");break;case f.FRAMEBUFFER_UNSUPPORTED:console.error("The format of the attachment is not supported or if depth and stencil attachments are not the same renderbuffer.");break;default:console.log("Nothing special with the framebuffer")}f.drawArrays(f.TRIANGLES,0,6);let o=new Float32Array(i);return f.readPixels(0,0,e,t-n,f.RGBA,f.FLOAT,o),f.deleteTexture(E),o},clean:function(){f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,null),f.activeTexture(f.TEXTURE0+1),f.bindTexture(f.TEXTURE_2D,null),f.deleteTexture(A),f.bindFramebuffer(f.FRAMEBUFFER,null),f.deleteFramebuffer(g)},exit:function(){}}):void alert("Need WEBGL_color_buffer_float"):void alert("Need OES_texture_float")}();console.log(a),console.log(s),a.setup(o,i),s.setup(o,i);let u=A(a.run,o,i),c=A(s.run,o,i);s.clean(),console.log(u.text),console.log(c.text),n(0,r=!1),function(e,t){if(console.log(e),console.log(t),e.length!==t.length)throw`Not same length, ${e.length} and ${t.length}`;for(let n=0;n<e.length;n++)if(Math.abs(e[n]-t[n])>.01)throw`Not same context at index ${n}`}(u.result,c.result)}),10)}]}export default class extends e{constructor(e){super(),t(this,e,D,U,n,{})}}export{M as prerender};
